---

layout:     post
title:      "架构师之路系列 - 概述"
subtitle:   "网站技术架构发展历程中的各个阶段~"
date:       2017-12-12 21:00:00
author:     "伍源辉"
header-img: "img/2017-12-13.jpg"
tags:
    - 架构
    - 大型网站

---

## 大型网站系统的特点

- 高并发，大流量。
- 7*24小时高可用。
- 存储、管理海量数据。
- 用户分布范围广、网络情况千差万别。
- 面临严峻的网络安全环境。
- 需求快速变更、版本快速迭代。
- 网站架构循序渐进式发展。

## 网站架构的发展历程

#### 初始阶段

单服务器：LAMP + 其他免费开源软件部署在同一服务器

#### 简单分离阶段

应用服务器：强CPU + 大内存
文件服务器：大磁盘空间 + 磁盘检索速度
数据库服务器：大内存 + 磁盘检索速度

#### 分布式缓存阶段

本地缓存：[优点]速度快 [缺点]容量有限，与应用服务器竞争内存
分布式缓存：可无限扩容，不会受单点故障影响

#### 应用服务器集群阶段

服务器集群：负载均衡服务器 + 多个应用服务器

#### 数据库架构阶段

主从热备：1个主数据库 + N个从数据库，使用主从复制实现数据同步
读写分离：在主数据库执行写操作，在从数据库执行读操作

#### 反向代理&CDN阶段

目的：缓存请求资源，直接返回请求结果，减轻应用服务器压力。
区别：CDN通常部署在网络提供商的机房，反向代理通常部署在中心机房。

#### 分布式文件系统&分布式数据库阶段

特点：可无限扩容，不受单点故障影响。

#### NoSQL&搜索引擎阶段

NoSQL：为非关系型数据提供更好的支持和更高的读写性能。
搜索引擎：建立专业的数据索引，提升数据检索效率。
数据访问层：位于应用服务器和底层数据存储服务之间，用于统一调度搜索引擎、NoSQL、缓存、文件、数据库等各种数据源。

#### 业务拆分阶段

应用拆分：将相对独立的系统或者功能模块拆分后独立部署维护。
消息队列服务：为多个应用之间进行消息通知、数据分发提供支持。

#### 分布式服务阶段

提取公共基础服务独立部署，对外提供接口，通过组合公共基础服务可以实现灵活多变的上层应用。

#### 终极奥义阶段

建设云计算平台，出售计算资源和存储空间，对外提供技术架构解决方案。

## 架构的误区与经验

- 网站架构要避免过度设计，应该根据网站规模循序渐进地应用架构方案，针对性能瓶颈灵活地选择解决方案。
- 技术应该服务于业务，应该在业务的基础上提炼架构，业务与技术架构并驾齐驱，密不可分。
- 大公司的解决方案固然值得学习，但不应盲从和生搬硬套，避免杀鸡用牛刀式的浪费。
- 特定的场景使用合适的技术，不要一味追求新技术新架构，避免出现技术上的错配而浪费资源和时间。
- 技术不是万能的，业务架构的问题有时候通过优化业务解决起来更有效，不要妄图通过技术解决一切问题。
- 成熟的云计算服务很多时候能有效节省人力成本和时间成本，按需购买、弹性计算，对于创业公司的价值尤其显著。
